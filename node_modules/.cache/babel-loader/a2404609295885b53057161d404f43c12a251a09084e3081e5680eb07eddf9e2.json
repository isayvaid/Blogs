{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{baseUrl}from\"../baseUrl\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AppContext=/*#__PURE__*/createContext();export default function AppContextProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),totalPages=_useState8[0],setTotalPages=_useState8[1];var navigate=useNavigate();// Fetch Blog Data\nvar fetchBlogPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var page,tag,category,url,res,data,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:page=_args.length>0&&_args[0]!==undefined?_args[0]:1;tag=_args.length>1&&_args[1]!==undefined?_args[1]:null;category=_args.length>2?_args[2]:undefined;setLoading(true);url=\"\".concat(baseUrl,\"?page=\").concat(page);if(tag){url+=\"&tag=\".concat(tag);}if(category){url+=\"&category=\".concat(category);}_context.prev=7;_context.next=10;return fetch(url);case 10:res=_context.sent;_context.next=13;return res.json();case 13:data=_context.sent;if(!(!data.posts||data.posts.length===0)){_context.next=16;break;}throw new Error(\"Something Went Wrong\");case 16:console.log(\"Api Response\",data);setPage(data.page);setPosts(data.posts);setTotalPages(data.totalPages);_context.next=28;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](7);console.log(\"Error in Fetching BlogPosts\",_context.t0);setPage(1);setPosts([]);setTotalPages(null);case 28:setLoading(false);case 29:case\"end\":return _context.stop();}},_callee,null,[[7,22]]);}));return function fetchBlogPosts(){return _ref2.apply(this,arguments);};}();// Handle When Next and Previous button are clicked\nvar handlePageChange=function handlePageChange(page){navigate({search:\"?page=\".concat(page)});setPage(page);};var value={posts:posts,setPosts:setPosts,loading:loading,setLoading:setLoading,page:page,setPage:setPage,totalPages:totalPages,setTotalPages:setTotalPages,fetchBlogPosts:fetchBlogPosts,handlePageChange:handlePageChange};return/*#__PURE__*/_jsx(AppContext.Provider,{value:value,children:children});}","map":{"version":3,"names":["createContext","useState","useNavigate","baseUrl","jsx","_jsx","AppContext","AppContextProvider","_ref","children","_useState","_useState2","_slicedToArray","posts","setPosts","_useState3","_useState4","loading","setLoading","_useState5","_useState6","page","setPage","_useState7","_useState8","totalPages","setTotalPages","navigate","fetchBlogPosts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","tag","category","url","res","data","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","concat","fetch","sent","json","Error","console","log","t0","stop","apply","handlePageChange","search","value","Provider"],"sources":["/Users/saylivaidya/Blogs/src/context/AppContext.js"],"sourcesContent":["import { createContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { baseUrl } from \"../baseUrl\";\r\n\r\nexport const AppContext = createContext();\r\n\r\nexport default function AppContextProvider({ children }) {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch Blog Data\r\n  const fetchBlogPosts = async (page = 1, tag=null, category) => {\r\n    setLoading(true);\r\n    let url = `${baseUrl}?page=${page}`;\r\n    if(tag) {\r\n      url += `&tag=${tag}`;\r\n    }\r\n    if(category) {\r\n      url += `&category=${category}`;\r\n    }\r\n    try {\r\n      const res = await fetch(url);\r\n      const data = await res.json();\r\n      if (!data.posts || data.posts.length === 0)\r\n        throw new Error(\"Something Went Wrong\");\r\n      console.log(\"Api Response\", data);\r\n      setPage(data.page);\r\n      setPosts(data.posts);\r\n      setTotalPages(data.totalPages);\r\n    } catch (error) {\r\n      console.log(\"Error in Fetching BlogPosts\", error);\r\n      setPage(1);\r\n      setPosts([]);\r\n      setTotalPages(null);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // Handle When Next and Previous button are clicked\r\n  const handlePageChange = (page) => {\r\n    navigate( { search: `?page=${page}`});\r\n    setPage(page);\r\n  };\r\n\r\n  const value = {\r\n    posts,\r\n    setPosts,\r\n    loading,\r\n    setLoading,\r\n    page,\r\n    setPage,\r\n    totalPages,\r\n    setTotalPages,\r\n    fetchBlogPosts,\r\n    handlePageChange,\r\n  };\r\n\r\n  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}