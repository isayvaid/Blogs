{"ast":null,"code":"import _regeneratorRuntime from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/saylivaidya/Blogs/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext}from'react';import{useNavigate,useNavigation}from'react-router-dom';import{AppContext}from'../context/AppContext';import{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import Header from'../components/Header';import BlogDetails from'../components/BlogDetails';import{baseUrl}from'../baseUrl';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BlogPage=function BlogPage(){var newBaseUrl=\"https://codehelp-apis.vercel.app/api/\";var _useState=useState(null),_useState2=_slicedToArray(_useState,2),blog=_useState2[0],setBlog=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedblogs=_useState4[0],setRelatedBlogs=_useState4[1];var location=useLocation();var navigation=useNavigate();var _useContext=useContext(AppContext),setLoading=_useContext.setLoading,loading=_useContext.loading;var blogId=location.pathname.split(\"/\").at(-1);function fetchRelatedBlogs(){return _fetchRelatedBlogs.apply(this,arguments);}function _fetchRelatedBlogs(){_fetchRelatedBlogs=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);url=\"\".concat(newBaseUrl,\"get-blog?blogId=\").concat(blogId);console.log(\"URL is: \");console.log(url);_context.prev=4;_context.next=7;return fetch(url);case 7:res=_context.sent;_context.next=10;return res.json();case 10:data=_context.sent;setBlog(data.blog);setRelatedBlogs(data.relatedBlogs);_context.next=20;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](4);console.log(\"Error aagya in blog id wali call\");setBlog(null);setRelatedBlogs([]);case 20:setLoading(false);case 21:case\"end\":return _context.stop();}},_callee,null,[[4,15]]);}));return _fetchRelatedBlogs.apply(this,arguments);}useEffect(function(){if(blogId){fetchRelatedBlogs();}},[location.pathname]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigation(-1);},children:\"Back\"})}),loading?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\" Loading\"})}):blog?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BlogDetails,{post:blog}),/*#__PURE__*/_jsx(\"h2\",{children:\" Related Blogs \"}),relatedblogs.map(function(post){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BlogDetails,{post:post})},post.id);})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:\"No Blog Found\"})})]});};export default BlogPage;","map":{"version":3,"names":["React","useContext","useNavigate","useNavigation","AppContext","useState","useEffect","useLocation","Header","BlogDetails","baseUrl","jsx","_jsx","jsxs","_jsxs","BlogPage","newBaseUrl","_useState","_useState2","_slicedToArray","blog","setBlog","_useState3","_useState4","relatedblogs","setRelatedBlogs","location","navigation","_useContext","setLoading","loading","blogId","pathname","split","at","fetchRelatedBlogs","_fetchRelatedBlogs","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","res","data","wrap","_callee$","_context","prev","next","concat","console","log","fetch","sent","json","relatedBlogs","t0","stop","children","onClick","post","map","id"],"sources":["/Users/saylivaidya/Blogs/src/Pages/BlogPage.jsx"],"sourcesContent":["import React, { useContext } from 'react'\nimport { useNavigate, useNavigation } from 'react-router-dom';\nimport { AppContext } from '../context/AppContext';\nimport { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport Header from '../components/Header';\nimport BlogDetails from '../components/BlogDetails';\nimport { baseUrl } from '../baseUrl';\n\nconst BlogPage = () => {\n    const newBaseUrl = \"https://codehelp-apis.vercel.app/api/\";\n    const [blog, setBlog] = useState(null);\n    const[relatedblogs, setRelatedBlogs] = useState([]);\n    const location = useLocation();\n    const navigation = useNavigate();\n    const {setLoading, loading} = useContext(AppContext);\n\n    const blogId = location.pathname.split(\"/\").at(-1);\n\n    async function fetchRelatedBlogs() {\n        setLoading(true);\n        let url = `${newBaseUrl}get-blog?blogId=${blogId}`;\n        console.log(\"URL is: \");\n        console.log(url);\n        try {\n            const res = await fetch(url);\n            const data = await res.json();\n            \n            setBlog(data.blog);\n            setRelatedBlogs(data.relatedBlogs);\n        }\n        catch(error) {\n            console.log(\"Error aagya in blog id wali call\");\n            setBlog(null);\n            setRelatedBlogs([]);\n        }\n        setLoading(false);\n    }\n\n    useEffect( () => {\n        if(blogId) {\n            fetchRelatedBlogs();\n        }\n    }, [location.pathname] )\n\n  return (\n    <div>\n      <Header/>\n      <div>\n        <button\n        onClick={() => navigation(-1)}\n        >\n            Back\n        </button>\n      </div>\n      {\n        loading ?\n        (<div>\n            <p> Loading</p>\n        </div>) :\n        blog ?\n        (<div>\n            <BlogDetails post={blog} />\n            <h2> Related Blogs </h2>\n            {\n                relatedblogs.map( (post) => (\n                    <div key = {post.id}>\n                        <BlogDetails post={post} />\n                    </div>\n                ) )\n            }\n\n        </div>) :\n        (<div>\n            <p>No Blog Found</p>\n        </div>)\n       \n      }\n\n\n    </div>\n  )\n}\n\nexport default BlogPage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}